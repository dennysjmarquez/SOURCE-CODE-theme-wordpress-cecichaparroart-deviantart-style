tinymce.PluginManager.add("preview", function (e) {
    var t = e.settings;
    e.addCommand("mcePreview", function () {
        e.windowManager.open({
            title: "Preview",
            width: parseInt(e.getParam("plugin_preview_width", "650"), 10),
            height: parseInt(e.getParam("plugin_preview_height", "auto"), 10),
            html: '<iframe class="bb" src="javascript:\'\'" frameborder="0"></iframe>',
            buttons: {
                text: "Close",
                onclick: function () {
                    this.parent().parent().close()
                }
            },
            onPostRender: function () {
                var n, r = this.getEl("body").firstChild.contentWindow.document,
                    i = "";
						if($('#author').val()){
							var unam =$('#author').val();
						}else{
							var unam ='Unnamed';
						}
						
					
                tinymce.each(e.contentCSS, function (t) {
                    i += '<link type="text/css" rel="stylesheet" href="' + e.documentBaseURI.toAbsolute(t) + '">'
                });
                var o = t.body_id || "tinymce"; - 1 != o.indexOf("=") && (o = e.getParam("body_id", "", "hash"), o = o[e.id] || o);
                var a = t.body_class || ""; - 1 != a.indexOf("=") && (a = e.getParam("body_class", "", "hash"), a = a[e.id] || ""), n = "<!DOCTYPE html><html><head>" + i + "</head>" + '<body id="' + o + '" class="mce-content-body ' + a + '">' + 
				
				'<div class="saicl-comment-right"><div class="saicl-comment-content"><div class="saicl-comment-text"><span class="saicl-comment-text">'+e.getContent()+'</div><!--.saicl-comment-text--></div><!--.saicl-comment-content--><div class="saicl-comment-info"><div class="saicl-comment-info-contenedor"><span class="saicl-commenter-name">'+unam+'</span><span class="saicl-comment-time">0 mins</span><div class="saicl-comment-info-respon"><a class="saicl-reply-link" id="saicl-reply-link-445">Reply</a></div></div></div></div>'
				
				
				
				+ "</body>" + "</html>", r.open(), r.write(n), r.close()
            }
        })
    }), e.addButton("preview", {
        title: "Preview",
        cmd: "mcePreview"
    }), e.addMenuItem("preview", {
        text: "Preview",
        cmd: "mcePreview",
        context: "view"
    })
});